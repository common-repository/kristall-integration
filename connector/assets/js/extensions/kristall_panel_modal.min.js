"use strict";
krPanel.modal || (krPanel.modal = {
    version: "1.2.5",
    date: "2020-04-26 23:23",
    defaults: {
        closeOnEscape: !0,
        closeOnBackdrop: !0,
        dragit: !1,
        headerControls: "closeonly",
        resizeit: !1,
        syncMargins: !1
    },
    addBackdrop: function(e) {
        var n = document.getElementsByClassName("krPanel-modal-backdrop").length,
            a = document.createElement("div");
			this.offScroll(1);
        return a.id = "krPanel-modal-backdrop-" + e, 0 === n ? a.className = "krPanel-modal-backdrop" : n > 0 && (a.className = "krPanel-modal-backdrop krPanel-modal-backdrop-multi"), a.style.zIndex = this.ziModal.next(), a
    },
    removeBackdrop: function(e) {
        var n = document.getElementById("krPanel-modal-backdrop-".concat(e));
        n.classList.add("krPanel-modal-backdrop-out");
        var a = 1e3 * parseFloat(getComputedStyle(n).animationDuration);
		this.offScroll(0);
        window.setTimeout(function() {
            document.body.removeChild(n)
        }, a)
    },
	offScroll: function(v) {
		var n = document.getElementsByClassName("krPanel-off-scroll").length;
		if (n && !v) {document.body.classList.remove("krPanel-off-scroll")} else if (!n && v) {document.body.classList.add("krPanel-off-scroll")}
	},
    create: function() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        e.paneltype = "modal", e.id ? "function" == typeof e.id && (e.id = e.id()) : e.id = "krPanel-".concat(krPanel.idCounter += 1);
        var n = e,
            a = this.addBackdrop(n.id);
        return e.config && delete(n = Object.assign({}, e.config, e)).config, n = Object.assign({}, this.defaults, n, {
            container: "window"
        }), document.body.append(a), krPanel.create(n, function(e) {
            e.style.zIndex = krPanel.modal.ziModal.next(), e.header.style.cursor = "default", e.footer.style.cursor = "default", n.closeOnBackdrop && krPanel.pointerup.forEach(function(a) {
                document.getElementById("krPanel-modal-backdrop-".concat(n.id)).addEventListener(a, function() {
                    e.close(null, !0)
                })
            }), e.options.onclosed.unshift(function() {
                return krPanel.modal.removeBackdrop(n.id), !0
            })
        })
    }
}, krPanel.modal.ziModal = function() {
    var e = krPanel.ziBase + 1e5;
    return {
        next: function() {
            return e++
        }
    }
}()), "undefined" != typeof module && (module.exports = krPanel);